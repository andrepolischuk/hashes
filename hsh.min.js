// Hsh Â© 2013-2015 Andrey Polischuk github.com/andrepolischuk/hsh
!function(){"use strict";function d(a){var b="^";a="*"===a?"/"+a:a,a=a.split("/").splice(1);for(var c=0;c<a.length;c++)b+="/"+("*"===a[c]?".*":a[c]);return b+="$",new RegExp(b)}function e(){return window.location.hash.replace(new RegExp(["^",a.pref,"(.*)$"].join("")),"$1")}function f(){var a=e();if(j.route!==a){j.route=a;for(var c=0;c<b.length;c++)if(b[c].exp.test(a)){b[c].fn(a);break}}}function g(a){a!==window.location.hash&&(f(),a=window.location.hash),setTimeout(function(){g(a)},500)}function h(b,c){b in a&&(a[b]=c)}function i(){window.location.hash.length<=a.pref.length&&(window.location.hash=a.pref+a.index),f(),c?"addEventListener"in window?window.addEventListener("hashchange",f,!1):window.attachEvent("onhashchange",f):g()}function j(a,c){if("function"==typeof a)return j("*",a);if("function"==typeof c){var e={};e.path=a,e.exp=d(a),e.fn=c,b.push(e)}else i()}var a={};a.pref="#",a.index="/";var b=[],c="onhashchange"in window&&!(/MSIE.\d+\./gi.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/.*MSIE.(\d+)\..*/gi,"$1"))<8);j.route=null,j.set=function(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&h(c,a[c]);else h(a,b)},j.redirectInternal=function(b){b||(window.location.hash=a.pref+b)},j.redirectExternal=function(a){a||(window.location=a)},"function"==typeof define&&define.amd?define([],function(){return j}):"undefined"!=typeof module&&module.exports?module.exports=j:this.hsh=j}.call(this);
