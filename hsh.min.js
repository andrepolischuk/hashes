// Hsh Â© 2013-2015 Andrey Polischuk github.com/andrepolischuk/hsh
!function(){"use strict";function e(e){if(e instanceof RegExp)return e;if("*"===e)return new RegExp("^.*$");var n="^";e=e.split("/").splice(1,e.length);for(var t=0;t<e.length;t++)n+="\\/"+e[t].replace(/(\(|\)|\[|\]|\\|\.|\^|\$|\||\?|\+)/g,"\\$1").replace(/([*])/g,".*").replace(/(:\w+)/g,"(.+)");return n+="$",new RegExp(n)}function n(e){if(e instanceof RegExp)return[];for(var n=e.match(/:(\w+)/g)||[],t=0;t<n.length;t++)n[t]=n[t].substr(1);return n}function t(t,r){this.path=t,this.exp=e(this.path),this.params=n(this.path),this.fn=r}function r(e,n){var t=e.match(n.exp);if(t){this.route=e,this.params={};for(var r=0;r<t.length-1;r++)this.params[n.params[r]||r]=t[r+1]}}function i(){s.current=u.hash.substr(h.pref.length),s.show(s.current)}function o(e){e!==u.hash&&(i(),e=u.hash),setTimeout(function(){o(e)},500)}function a(){u.hash.length<=h.pref.length&&(u.hash=h.pref+h.index),i(),f?"addEventListener"in window?window.addEventListener("hashchange",i,!1):window.attachEvent("onhashchange",i):o()}function s(e,n){return"function"==typeof e?s("*",e):void("function"==typeof n?s.routes.push(new t(e,n)):"string"==typeof e?s.show(e):a())}var h={};h.pref="#",h.index="/";var u=window.location,f="onhashchange"in window&&!(/MSIE.\d+\./gi.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/.*MSIE.(\d+)\..*/gi,"$1"))<8);s.current=null,s.routes=[],s.show=function(e){for(var n,t=0;t<s.routes.length;t++)if(n=new r(e,s.routes[t]),"route"in n){s.routes[t].fn.call(n);break}},s.redirect=function(e){e&&(u.hash=h.pref+e)},s.redirectExternal=function(e){e&&(u=e)},"function"==typeof define&&define.amd?define([],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:this.hsh=s}.call(this);
