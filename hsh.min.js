// Hsh Â© 2013-2015 Andrey Polischuk github.com/andrepolischuk/hsh
!function(){"use strict";function e(a){if("*"===a)return new RegExp("^.*$");var b="^";a=a.split("/").splice(1,a.length);for(var c=0;c<a.length;c++)b+="/"+a[c].replace(/([*])/g,".*").replace(/(:[A-Za-z0-9]+)/g,"(.+)");return b+="$",new RegExp(b)}function f(a){for(var b=a.match(/:([A-Za-z0-9]+)/g)||[],c=0;c<b.length;c++)b[c]=b[c].substr(1);return b}function g(a){var b=l.route.match(a.exp);if(b){var c={};c.route=l.route,c.params={};for(var d=0;d<a.params.length;d++)c.params[a.params[d]]=b[d+1];return c}}function h(){l.route=c.hash.substr(a.pref.length);for(var e,d=0;d<b.length;d++)if(e=g(b[d])){b[d].fn.call(e);break}}function i(a){a!==c.hash&&(h(),a=c.hash),setTimeout(function(){i(a)},500)}function j(b,c){b in a&&(a[b]=c)}function k(){c.hash.length<=a.pref.length&&(c.hash=a.pref+a.index),h(),d?"addEventListener"in window?window.addEventListener("hashchange",h,!1):window.attachEvent("onhashchange",h):i()}function l(a,c){if("function"==typeof a)return l("*",a);if("function"==typeof c){var d={};d.path=a,d.exp=e(a),d.params=f(a),d.fn=c,b.push(d)}else k()}var a={};a.pref="#",a.index="/";var b=[],c=window.location,d="onhashchange"in window&&!(/MSIE.\d+\./gi.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/.*MSIE.(\d+)\..*/gi,"$1"))<8);l.route=null,l.set=function(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&j(c,a[c]);else j(a,b)},l.redirectInternal=function(b){b||(c.hash=a.pref+b)},l.redirectExternal=function(a){a||(c=a)},"function"==typeof define&&define.amd?define([],function(){return l}):"undefined"!=typeof module&&module.exports?module.exports=l:this.hsh=l}.call(this);
