// Hsh Â© 2013-2015 Andrey Polischuk github.com/andrepolischuk/hsh
!function(){"use strict";function d(a){if("*"===a)return new RegExp("^.*$");var b="^";a=a.split("/").splice(1,a.length);for(var c=0;c<a.length;c++)b+="/"+a[c].replace(/([*])/g,".*").replace(/(:[A-Za-z0-9]+)/g,"(.+)");return b+="$",new RegExp(b)}function e(a){for(var b=a.match(/:([A-Za-z0-9]+)/g)||[],c=0;c<b.length;c++)b[c]=b[c].substr(1);return b}function f(a,b){this.path=a,this.exp=d(this.path),this.params=e(this.path),this.fn=b}function g(a){var b=l.current.match(a.exp);if(b){this.route=l.current,this.params={};for(var c=0;c<a.params.length;c++)this.params[a.params[c]]=b[c+1]}}function h(){l.current=b.hash.substr(a.pref.length);for(var d,c=0;c<l.routes.length;c++)if(d=new g(l.routes[c]),"route"in d){l.routes[c].fn.call(d);break}}function i(a){a!==b.hash&&(h(),a=b.hash),setTimeout(function(){i(a)},500)}function j(b,c){b in a&&(a[b]=c)}function k(){b.hash.length<=a.pref.length&&(b.hash=a.pref+a.index),h(),c?"addEventListener"in window?window.addEventListener("hashchange",h,!1):window.attachEvent("onhashchange",h):i()}function l(a,b){return"function"==typeof a?l("*",a):("function"==typeof b?l.routes.push(new f(a,b)):k(),void 0)}var a={};a.pref="#",a.index="/";var b=window.location,c="onhashchange"in window&&!(/MSIE.\d+\./gi.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/.*MSIE.(\d+)\..*/gi,"$1"))<8);l.current=null,l.routes=[],l.set=function(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&j(c,a[c]);else j(a,b)},l.redirectInternal=function(c){c||(b.hash=a.pref+c)},l.redirectExternal=function(a){a||(b=a)},"function"==typeof define&&define.amd?define([],function(){return l}):"undefined"!=typeof module&&module.exports?module.exports=l:this.hsh=l}.call(this);
