// Hsh Â© 2013-2015 Andrey Polischuk github.com/andrepolischuk/hsh
!function(){"use strict";function d(a,b){this.path=a,this.exp=this.pathRegExp(),this.params=this.pathParams(),this.fn=b}function e(a){var b=j.current.match(a.exp);if(b){this.route=j.current,this.params={};for(var c=0;c<a.params.length;c++)this.params[a.params[c]]=b[c+1]}}function f(){j.current=b.hash.substr(a.pref.length);for(var d,c=0;c<j.routes.length;c++)if(d=new e(j.routes[c]),"route"in d){j.routes[c].fn.call(d);break}}function g(a){a!==b.hash&&(f(),a=b.hash),setTimeout(function(){g(a)},500)}function h(b,c){b in a&&(a[b]=c)}function i(){b.hash.length<=a.pref.length&&(b.hash=a.pref+a.index),f(),c?"addEventListener"in window?window.addEventListener("hashchange",f,!1):window.attachEvent("onhashchange",f):g()}function j(a,b){return"function"==typeof a?j("*",a):("function"==typeof b?j.routes.push(new d(a,b)):i(),void 0)}var a={};a.pref="#",a.index="/";var b=window.location,c="onhashchange"in window&&!(/MSIE.\d+\./gi.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/.*MSIE.(\d+)\..*/gi,"$1"))<8);d.prototype.pathRegExp=function(){if("*"===this.path)return new RegExp("^.*$");for(var a="^",b=this.path.split("/").splice(1,this.path.length),c=0;c<b.length;c++)a+="/"+b[c].replace(/([*])/g,".*").replace(/(:[A-Za-z0-9]+)/g,"(.+)");return a+="$",new RegExp(a)},d.prototype.pathParams=function(){for(var a=this.path.match(/:([A-Za-z0-9]+)/g)||[],b=0;b<a.length;b++)a[b]=a[b].substr(1);return a},j.current=null,j.routes=[],j.set=function(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&h(c,a[c]);else h(a,b)},j.redirectInternal=function(c){c||(b.hash=a.pref+c)},j.redirectExternal=function(a){a||(b=a)},"function"==typeof define&&define.amd?define([],function(){return j}):"undefined"!=typeof module&&module.exports?module.exports=j:this.hsh=j}.call(this);
